{
    "sourceFile": "app_deploy/init.sh",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 6,
            "patches": [
                {
                    "date": 1731849359906,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1731849430633,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,14 +19,24 @@\n # 创建后端基础文件\n touch server/app/config.py\n touch server/main.py\n \n-# 移动现有前端文件到web/src目录\n-# 注意：这里需要根据实际情况调整源目录路径\n-mv src/* web/src/\n-mv public/* web/public/\n+# 移动前端文件到web目录\n+# 移动src目录下的所有内容\n+mv src/* web/src/ 2>/dev/null || true\n \n+# 移动其他前端配置文件\n+mv package.json web/ 2>/dev/null || true\n\\ No newline at end of file\n+mv vite.config.js web/ 2>/dev/null || true\n+mv *.html web/ 2>/dev/null || true\n+mv .env* web/ 2>/dev/null || true\n+\n # 创建空的日志目录\n touch server/logs/.gitkeep\n \n+# 创建前端目录结构\n+mkdir -p web/src/{api,assets,components,router,store,styles,utils,views}\n+mkdir -p web/src/views/{password,environment,host,project,script,deploy,dashboard}\n+mkdir -p web/src/components/{common,layout}\n+\n # 设置权限\n-chmod +x init.sh \n+chmod +x init.sh\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731849615742,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,42 +1,104 @@\n #!/bin/bash\n \n+echo \"开始初始化项目结构...\"\n+\n # 创建主目录结构\n-mkdir -p web/src\n+echo \"创建目录结构...\"\n+\n+# 前端目录结构\n+mkdir -p web/src/{api,assets,components,router,store,styles,utils,views}\n+mkdir -p web/src/views/{password,environment,host,project,script,deploy,dashboard}\n+mkdir -p web/src/components/{common,layout}\n mkdir -p web/public\n \n+# 后端目录结构\n mkdir -p server/app/{api,models,services,utils}\n mkdir -p server/logs\n mkdir -p server/scripts\n mkdir -p server/tests\n \n # 创建后端Python包所需的__init__.py文件\n+echo \"创建Python包文件...\"\n touch server/app/__init__.py\n touch server/app/api/__init__.py\n touch server/app/models/__init__.py\n touch server/app/services/__init__.py\n touch server/app/utils/__init__.py\n \n-# 创建后端基础文件\n-touch server/app/config.py\n-touch server/main.py\n+# 移动前端文件\n+echo \"移动前端文件...\"\n \n-# 移动前端文件到web目录\n-# 移动src目录下的所有内容\n-mv src/* web/src/ 2>/dev/null || true\n+# 移动src下的文件到对应目录\n+if [ -d \"src\" ]; then\n+  # API文件\n+  mv src/api/* web/src/api/ 2>/dev/null || true\n+  \n\\ No newline at end of file\n+  # 组件文件\n+  mv src/components/common/* web/src/components/common/ 2>/dev/null || true\n+  mv src/components/layout/* web/src/components/layout/ 2>/dev/null || true\n+  \n+  # 路由和状态管理\n+  mv src/router/* web/src/router/ 2>/dev/null || true\n+  mv src/store/* web/src/store/ 2>/dev/null || true\n+  \n+  # 工具和样式\n+  mv src/utils/* web/src/utils/ 2>/dev/null || true\n+  mv src/styles/* web/src/styles/ 2>/dev/null || true\n+  mv src/assets/* web/src/assets/ 2>/dev/null || true\n+  \n+  # 视图文件\n+  mv src/views/password/* web/src/views/password/ 2>/dev/null || true\n+  mv src/views/environment/* web/src/views/environment/ 2>/dev/null || true\n+  mv src/views/host/* web/src/views/host/ 2>/dev/null || true\n+  mv src/views/project/* web/src/views/project/ 2>/dev/null || true\n+  mv src/views/script/* web/src/views/script/ 2>/dev/null || true\n+  mv src/views/deploy/* web/src/views/deploy/ 2>/dev/null || true\n+  mv src/views/dashboard/* web/src/views/dashboard/ 2>/dev/null || true\n+  \n+  # 移动主文件\n+  mv src/App.vue web/src/ 2>/dev/null || true\n+  mv src/main.js web/src/ 2>/dev/null || true\n+  \n+  # 清理原src目录\n+  rm -rf src\n+fi\n \n # 移动其他前端配置文件\n mv package.json web/ 2>/dev/null || true\n mv vite.config.js web/ 2>/dev/null || true\n-mv *.html web/ 2>/dev/null || true\n+mv index.html web/ 2>/dev/null || true\n mv .env* web/ 2>/dev/null || true\n+mv public/* web/public/ 2>/dev/null || true\n \n+# 创建前端配置文件\n+echo \"创建前端配置文件...\"\n+if [ ! -f \"web/vite.config.js\" ]; then\n+  echo \"import { defineConfig } from 'vite'\n+import vue from '@vitejs/plugin-vue'\n+\n+export default defineConfig({\n+  plugins: [vue()],\n+  server: {\n+    port: 8080,\n+    proxy: {\n+      '/api': {\n+        target: 'http://localhost:3000',\n+        changeOrigin: true\n+      },\n+      '/ws': {\n+        target: 'ws://localhost:3000',\n+        ws: true\n+      }\n+    }\n+  }\n+})\" > web/vite.config.js\n+fi\n+\n # 创建空的日志目录\n touch server/logs/.gitkeep\n \n-# 创建前端目录结构\n-mkdir -p web/src/{api,assets,components,router,store,styles,utils,views}\n-mkdir -p web/src/views/{password,environment,host,project,script,deploy,dashboard}\n-mkdir -p web/src/components/{common,layout}\n+# 设置权限\n+chmod +x init.sh\n \n-# 设置权限\n-chmod +x init.sh\n+echo \"初始化完成！\"\n+echo \"请检查web和server目录下的文件是否已正确移动。\"\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731849727090,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -29,47 +29,51 @@\n echo \"移动前端文件...\"\n \n # 移动src下的文件到对应目录\n if [ -d \"src\" ]; then\n+  # 创建必要的目录（如果不存在）\n+  for dir in api assets components router store styles utils views; do\n+    mkdir -p web/src/$dir\n+  done\n+  \n   # API文件\n-  mv src/api/* web/src/api/ 2>/dev/null || true\n+  cp -r src/api/* web/src/api/ 2>/dev/null || true\n   \n   # 组件文件\n-  mv src/components/common/* web/src/components/common/ 2>/dev/null || true\n-  mv src/components/layout/* web/src/components/layout/ 2>/dev/null || true\n+  cp -r src/components/common/* web/src/components/common/ 2>/dev/null || true\n+  cp -r src/components/layout/* web/src/components/layout/ 2>/dev/null || true\n   \n   # 路由和状态管理\n-  mv src/router/* web/src/router/ 2>/dev/null || true\n-  mv src/store/* web/src/store/ 2>/dev/null || true\n+  cp -r src/router/* web/src/router/ 2>/dev/null || true\n+  cp -r src/store/* web/src/store/ 2>/dev/null || true\n   \n   # 工具和样式\n-  mv src/utils/* web/src/utils/ 2>/dev/null || true\n-  mv src/styles/* web/src/styles/ 2>/dev/null || true\n-  mv src/assets/* web/src/assets/ 2>/dev/null || true\n+  cp -r src/utils/* web/src/utils/ 2>/dev/null || true\n+  cp -r src/styles/* web/src/styles/ 2>/dev/null || true\n+  cp -r src/assets/* web/src/assets/ 2>/dev/null || true\n   \n   # 视图文件\n-  mv src/views/password/* web/src/views/password/ 2>/dev/null || true\n-  mv src/views/environment/* web/src/views/environment/ 2>/dev/null || true\n-  mv src/views/host/* web/src/views/host/ 2>/dev/null || true\n-  mv src/views/project/* web/src/views/project/ 2>/dev/null || true\n-  mv src/views/script/* web/src/views/script/ 2>/dev/null || true\n-  mv src/views/deploy/* web/src/views/deploy/ 2>/dev/null || true\n-  mv src/views/dashboard/* web/src/views/dashboard/ 2>/dev/null || true\n+  cp -r src/views/password/* web/src/views/password/ 2>/dev/null || true\n+  cp -r src/views/environment/* web/src/views/environment/ 2>/dev/null || true\n+  cp -r src/views/host/* web/src/views/host/ 2>/dev/null || true\n+  cp -r src/views/project/* web/src/views/project/ 2>/dev/null || true\n+  cp -r src/views/script/* web/src/views/script/ 2>/dev/null || true\n+  cp -r src/views/deploy/* web/src/views/deploy/ 2>/dev/null || true\n+  cp -r src/views/dashboard/* web/src/views/dashboard/ 2>/dev/null || true\n   \n   # 移动主文件\n-  mv src/App.vue web/src/ 2>/dev/null || true\n-  mv src/main.js web/src/ 2>/dev/null || true\n-  \n-  # 清理原src目录\n-  rm -rf src\n+  cp src/App.vue web/src/ 2>/dev/null || true\n+  cp src/main.js web/src/ 2>/dev/null || true\n fi\n \n-# 移动其他前端配置文件\n-mv package.json web/ 2>/dev/null || true\n-mv vite.config.js web/ 2>/dev/null || true\n-mv index.html web/ 2>/dev/null || true\n-mv .env* web/ 2>/dev/null || true\n-mv public/* web/public/ 2>/dev/null || true\n+# 移动Vue配置文件\n+echo \"移动Vue配置文件...\"\n+cp package.json web/ 2>/dev/null || true\n+cp vite.config.js web/ 2>/dev/null || true\n+cp vue.config.js web/ 2>/dev/null || true\n+cp .env* web/ 2>/dev/null || true\n+cp index.html web/ 2>/dev/null || true\n+cp -r public/* web/public/ 2>/dev/null || true\n \n # 创建前端配置文件\n echo \"创建前端配置文件...\"\n if [ ! -f \"web/vite.config.js\" ]; then\n@@ -93,11 +97,32 @@\n   }\n })\" > web/vite.config.js\n fi\n \n+# 创建前端入口文件\n+if [ ! -f \"web/index.html\" ]; then\n+  echo \"<!DOCTYPE html>\n+<html lang=\\\"en\\\">\n+  <head>\n+    <meta charset=\\\"UTF-8\\\" />\n+    <link rel=\\\"icon\\\" type=\\\"image/svg+xml\\\" href=\\\"/vite.svg\\\" />\n+    <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\" />\n+    <title>App Deploy</title>\n+  </head>\n+  <body>\n+    <div id=\\\"app\\\"></div>\n+    <script type=\\\"module\\\" src=\\\"/src/main.js\\\"></script>\n+  </body>\n+</html>\" > web/index.html\n+fi\n+\n # 创建空的日志目录\n touch server/logs/.gitkeep\n \n+# 清理原始文件\n+echo \"清理原始文件...\"\n+rm -rf src public package.json vite.config.js vue.config.js .env* 2>/dev/null || true\n+\n # 设置权限\n chmod +x init.sh\n \n echo \"初始化完成！\"\n"
                },
                {
                    "date": 1731850106247,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,129 +1,27 @@\n-#!/bin/bash\n+# 在init.sh中添加\n+# 创建.env文件\n+echo \"VITE_BASE_API=/api\n+VITE_WS_URL=ws://localhost:3000/ws\" > web/.env\n \n-echo \"开始初始化项目结构...\"\n+# 更新main.js\n+echo \"import { createApp } from 'vue'\n+import ElementPlus from 'element-plus'\n+import 'element-plus/dist/index.css'\n+import * as ElementPlusIconsVue from '@element-plus/icons-vue'\n+import App from './App.vue'\n+import router from './router'\n+import store from './store'\n+import './styles/index.scss'\n \n-# 创建主目录结构\n-echo \"创建目录结构...\"\n+const app = createApp(App)\n \n-# 前端目录结构\n-mkdir -p web/src/{api,assets,components,router,store,styles,utils,views}\n-mkdir -p web/src/views/{password,environment,host,project,script,deploy,dashboard}\n-mkdir -p web/src/components/{common,layout}\n-mkdir -p web/public\n+// 注册所有图标\n+for (const [key, component] of Object.entries(ElementPlusIconsVue)) {\n+  app.component(key, component)\n+}\n \n-# 后端目录结构\n-mkdir -p server/app/{api,models,services,utils}\n-mkdir -p server/logs\n-mkdir -p server/scripts\n-mkdir -p server/tests\n+app.use(ElementPlus)\n+app.use(router)\n+app.use(store)\n \n-# 创建后端Python包所需的__init__.py文件\n-echo \"创建Python包文件...\"\n-touch server/app/__init__.py\n-touch server/app/api/__init__.py\n-touch server/app/models/__init__.py\n-touch server/app/services/__init__.py\n-touch server/app/utils/__init__.py\n-\n-# 移动前端文件\n-echo \"移动前端文件...\"\n-\n-# 移动src下的文件到对应目录\n-if [ -d \"src\" ]; then\n-  # 创建必要的目录（如果不存在）\n-  for dir in api assets components router store styles utils views; do\n-    mkdir -p web/src/$dir\n-  done\n-  \n-  # API文件\n-  cp -r src/api/* web/src/api/ 2>/dev/null || true\n-  \n-  # 组件文件\n-  cp -r src/components/common/* web/src/components/common/ 2>/dev/null || true\n-  cp -r src/components/layout/* web/src/components/layout/ 2>/dev/null || true\n-  \n-  # 路由和状态管理\n-  cp -r src/router/* web/src/router/ 2>/dev/null || true\n-  cp -r src/store/* web/src/store/ 2>/dev/null || true\n-  \n-  # 工具和样式\n-  cp -r src/utils/* web/src/utils/ 2>/dev/null || true\n-  cp -r src/styles/* web/src/styles/ 2>/dev/null || true\n-  cp -r src/assets/* web/src/assets/ 2>/dev/null || true\n-  \n-  # 视图文件\n-  cp -r src/views/password/* web/src/views/password/ 2>/dev/null || true\n-  cp -r src/views/environment/* web/src/views/environment/ 2>/dev/null || true\n-  cp -r src/views/host/* web/src/views/host/ 2>/dev/null || true\n-  cp -r src/views/project/* web/src/views/project/ 2>/dev/null || true\n-  cp -r src/views/script/* web/src/views/script/ 2>/dev/null || true\n-  cp -r src/views/deploy/* web/src/views/deploy/ 2>/dev/null || true\n-  cp -r src/views/dashboard/* web/src/views/dashboard/ 2>/dev/null || true\n-  \n-  # 移动主文件\n-  cp src/App.vue web/src/ 2>/dev/null || true\n-  cp src/main.js web/src/ 2>/dev/null || true\n-fi\n-\n-# 移动Vue配置文件\n-echo \"移动Vue配置文件...\"\n-cp package.json web/ 2>/dev/null || true\n-cp vite.config.js web/ 2>/dev/null || true\n-cp vue.config.js web/ 2>/dev/null || true\n-cp .env* web/ 2>/dev/null || true\n-cp index.html web/ 2>/dev/null || true\n-cp -r public/* web/public/ 2>/dev/null || true\n-\n-# 创建前端配置文件\n-echo \"创建前端配置文件...\"\n-if [ ! -f \"web/vite.config.js\" ]; then\n-  echo \"import { defineConfig } from 'vite'\n-import vue from '@vitejs/plugin-vue'\n-\n-export default defineConfig({\n-  plugins: [vue()],\n-  server: {\n-    port: 8080,\n-    proxy: {\n-      '/api': {\n-        target: 'http://localhost:3000',\n-        changeOrigin: true\n-      },\n-      '/ws': {\n-        target: 'ws://localhost:3000',\n-        ws: true\n-      }\n-    }\n-  }\n-})\" > web/vite.config.js\n-fi\n-\n-# 创建前端入口文件\n-if [ ! -f \"web/index.html\" ]; then\n-  echo \"<!DOCTYPE html>\n-<html lang=\\\"en\\\">\n-  <head>\n-    <meta charset=\\\"UTF-8\\\" />\n-    <link rel=\\\"icon\\\" type=\\\"image/svg+xml\\\" href=\\\"/vite.svg\\\" />\n-    <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\" />\n\\ No newline at end of file\n-    <title>App Deploy</title>\n-  </head>\n-  <body>\n-    <div id=\\\"app\\\"></div>\n-    <script type=\\\"module\\\" src=\\\"/src/main.js\\\"></script>\n-  </body>\n-</html>\" > web/index.html\n-fi\n-\n-# 创建空的日志目录\n-touch server/logs/.gitkeep\n-\n-# 清理原始文件\n-echo \"清理原始文件...\"\n-rm -rf src public package.json vite.config.js vue.config.js .env* 2>/dev/null || true\n-\n-# 设置权限\n-chmod +x init.sh\n-\n-echo \"初始化完成！\"\n-echo \"请检查web和server目录下的文件是否已正确移动。\"\n+app.mount('#app')\" > web/src/main.js\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731850870030,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,27 +1,73 @@\n-# 在init.sh中添加\n-# 创建.env文件\n-echo \"VITE_BASE_API=/api\n-VITE_WS_URL=ws://localhost:3000/ws\" > web/.env\n+#!/bin/bash\n \n-# 更新main.js\n-echo \"import { createApp } from 'vue'\n-import ElementPlus from 'element-plus'\n-import 'element-plus/dist/index.css'\n-import * as ElementPlusIconsVue from '@element-plus/icons-vue'\n-import App from './App.vue'\n-import router from './router'\n-import store from './store'\n-import './styles/index.scss'\n+echo \"开始初始化项目结构...\"\n \n-const app = createApp(App)\n+# 创建主目录结构\n+echo \"创建目录结构...\"\n \n-// 注册所有图标\n-for (const [key, component] of Object.entries(ElementPlusIconsVue)) {\n-  app.component(key, component)\n-}\n+# 前端目录结构\n+mkdir -p web/src/{api,assets,components,router,store,styles,utils,views}\n\\ No newline at end of file\n+mkdir -p web/src/views/{password,environment,host,project,script,deploy,dashboard}\n+mkdir -p web/src/components/{common,layout/components}\n+mkdir -p web/public\n \n-app.use(ElementPlus)\n-app.use(router)\n-app.use(store)\n+# 后端目录结构\n+mkdir -p server/app/{api,models,services,utils}\n+mkdir -p server/logs\n+mkdir -p server/scripts\n+mkdir -p server/tests\n \n-app.mount('#app')\" > web/src/main.js\n+# 创建后端Python包所需的__init__.py文件\n+echo \"创建Python包文件...\"\n+touch server/app/__init__.py\n+touch server/app/api/__init__.py\n+touch server/app/models/__init__.py\n+touch server/app/services/__init__.py\n+touch server/app/utils/__init__.py\n+\n+# 移动前端文件\n+echo \"移动前端文件...\"\n+\n+# 移动组件文件\n+cp -r src/components/common/* web/src/components/common/ 2>/dev/null || true\n+cp -r src/components/layout/* web/src/components/layout/ 2>/dev/null || true\n+cp -r src/components/layout/components/* web/src/components/layout/components/ 2>/dev/null || true\n+\n+# 移动视图文件\n+cp -r src/views/password/* web/src/views/password/ 2>/dev/null || true\n+cp -r src/views/environment/* web/src/views/environment/ 2>/dev/null || true\n+cp -r src/views/host/* web/src/views/host/ 2>/dev/null || true\n+cp -r src/views/project/* web/src/views/project/ 2>/dev/null || true\n+cp -r src/views/script/* web/src/views/script/ 2>/dev/null || true\n+cp -r src/views/deploy/* web/src/views/deploy/ 2>/dev/null || true\n+cp -r src/views/dashboard/* web/src/views/dashboard/ 2>/dev/null || true\n+\n+# 移动其他文件\n+cp -r src/api/* web/src/api/ 2>/dev/null || true\n+cp -r src/store/* web/src/store/ 2>/dev/null || true\n+cp -r src/utils/* web/src/utils/ 2>/dev/null || true\n+cp -r src/styles/* web/src/styles/ 2>/dev/null || true\n+cp -r src/assets/* web/src/assets/ 2>/dev/null || true\n+cp src/App.vue web/src/ 2>/dev/null || true\n+cp src/main.js web/src/ 2>/dev/null || true\n+cp src/router/index.js web/src/router/ 2>/dev/null || true\n+\n+# 移动配置文件\n+cp package.json web/ 2>/dev/null || true\n+cp vite.config.js web/ 2>/dev/null || true\n+cp vue.config.js web/ 2>/dev/null || true\n+cp .env* web/ 2>/dev/null || true\n+cp -r public/* web/public/ 2>/dev/null || true\n+\n+# 创建空的日志目录\n+touch server/logs/.gitkeep\n+\n+# 清理原始文件\n+echo \"清理原始文件...\"\n+rm -rf src public package.json vite.config.js vue.config.js .env* 2>/dev/null || true\n+\n+# 设置权限\n+chmod +x init.sh\n+\n+echo \"初始化完成！\"\n+echo \"请检查web和server目录下的文件是否已正确移动。\"\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731850983155,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,14 @@\n #!/bin/bash\n \n echo \"开始初始化项目结构...\"\n \n+# 检查是否存在源文件目录\n+if [ ! -d \"src\" ]; then\n+    echo \"错误: 源文件目录 'src' 不存在\"\n+    exit 1\n+fi\n+\n # 创建主目录结构\n echo \"创建目录结构...\"\n \n # 前端目录结构\n@@ -27,47 +33,99 @@\n \n # 移动前端文件\n echo \"移动前端文件...\"\n \n-# 移动组件文件\n-cp -r src/components/common/* web/src/components/common/ 2>/dev/null || true\n-cp -r src/components/layout/* web/src/components/layout/ 2>/dev/null || true\n-cp -r src/components/layout/components/* web/src/components/layout/components/ 2>/dev/null || true\n+# 定义一个函数来复制文件并检查\n+copy_and_check() {\n+    local src=$1\n+    local dest=$2\n+    if [ -e \"$src\" ]; then\n+        cp -r \"$src\" \"$dest\"\n+        echo \"✓ 已复制: $src -> $dest\"\n+    else\n+        echo \"! 警告: 未找到源文件: $src\"\n+    fi\n+}\n \n-# 移动视图文件\n-cp -r src/views/password/* web/src/views/password/ 2>/dev/null || true\n-cp -r src/views/environment/* web/src/views/environment/ 2>/dev/null || true\n-cp -r src/views/host/* web/src/views/host/ 2>/dev/null || true\n-cp -r src/views/project/* web/src/views/project/ 2>/dev/null || true\n-cp -r src/views/script/* web/src/views/script/ 2>/dev/null || true\n-cp -r src/views/deploy/* web/src/views/deploy/ 2>/dev/null || true\n-cp -r src/views/dashboard/* web/src/views/dashboard/ 2>/dev/null || true\n+# 复制组件文件\n+echo \"复制组件文件...\"\n+copy_and_check \"src/components/common\" \"web/src/components/\"\n+copy_and_check \"src/components/layout\" \"web/src/components/\"\n+copy_and_check \"src/components/layout/components\" \"web/src/components/layout/\"\n \n-# 移动其他文件\n-cp -r src/api/* web/src/api/ 2>/dev/null || true\n-cp -r src/store/* web/src/store/ 2>/dev/null || true\n-cp -r src/utils/* web/src/utils/ 2>/dev/null || true\n-cp -r src/styles/* web/src/styles/ 2>/dev/null || true\n-cp -r src/assets/* web/src/assets/ 2>/dev/null || true\n-cp src/App.vue web/src/ 2>/dev/null || true\n-cp src/main.js web/src/ 2>/dev/null || true\n-cp src/router/index.js web/src/router/ 2>/dev/null || true\n+# 复制视图文件\n+echo \"复制视图文件...\"\n+for dir in password environment host project script deploy dashboard; do\n+    copy_and_check \"src/views/$dir\" \"web/src/views/\"\n\\ No newline at end of file\n+done\n \n-# 移动配置文件\n-cp package.json web/ 2>/dev/null || true\n-cp vite.config.js web/ 2>/dev/null || true\n-cp vue.config.js web/ 2>/dev/null || true\n-cp .env* web/ 2>/dev/null || true\n-cp -r public/* web/public/ 2>/dev/null || true\n+# 复制其他文件\n+echo \"复制其他文件...\"\n+copy_and_check \"src/api\" \"web/src/\"\n+copy_and_check \"src/store\" \"web/src/\"\n+copy_and_check \"src/utils\" \"web/src/\"\n+copy_and_check \"src/styles\" \"web/src/\"\n+copy_and_check \"src/assets\" \"web/src/\"\n+copy_and_check \"src/App.vue\" \"web/src/\"\n+copy_and_check \"src/main.js\" \"web/src/\"\n+copy_and_check \"src/router/index.js\" \"web/src/router/\"\n \n+# 复制配置文件\n+echo \"复制配置文件...\"\n+copy_and_check \"package.json\" \"web/\"\n+copy_and_check \"vite.config.js\" \"web/\"\n+copy_and_check \"vue.config.js\" \"web/\"\n+copy_and_check \".env\" \"web/\"\n+copy_and_check \"public\" \"web/\"\n+\n+# 检查必要的文件是否存在\n+echo \"检查关键文件...\"\n+REQUIRED_FILES=(\n+    \"web/src/components/layout/Layout.vue\"\n+    \"web/src/components/layout/Navbar.vue\"\n+    \"web/src/components/layout/Sidebar.vue\"\n+    \"web/src/components/layout/components/AppMain.vue\"\n+    \"web/src/components/layout/components/index.js\"\n+    \"web/src/router/index.js\"\n+    \"web/src/store/index.js\"\n+    \"web/src/styles/index.scss\"\n+    \"web/src/App.vue\"\n+    \"web/src/main.js\"\n+)\n+\n+MISSING_FILES=0\n+for file in \"${REQUIRED_FILES[@]}\"; do\n+    if [ ! -f \"$file\" ]; then\n+        echo \"! 错误: 缺少关键文件: $file\"\n+        MISSING_FILES=$((MISSING_FILES + 1))\n+    fi\n+done\n+\n # 创建空的日志目录\n touch server/logs/.gitkeep\n \n # 清理原始文件\n-echo \"清理原始文件...\"\n-rm -rf src public package.json vite.config.js vue.config.js .env* 2>/dev/null || true\n+if [ $MISSING_FILES -eq 0 ]; then\n+    echo \"清理原始文件...\"\n+    rm -rf src public package.json vite.config.js vue.config.js .env* 2>/dev/null || true\n+    echo \"✓ 清理完成\"\n+else\n+    echo \"! 警告: 由于缺少关键文件，跳过清理步骤\"\n+fi\n \n # 设置权限\n chmod +x init.sh\n \n echo \"初始化完成！\"\n-echo \"请检查web和server目录下的文件是否已正确移动。\"\n+if [ $MISSING_FILES -eq 0 ]; then\n+    echo \"✓ 所有文件已成功移动\"\n+else\n+    echo \"! 警告: 有 $MISSING_FILES 个关键文件缺失，请检查\"\n+fi\n+\n+# 打印下一步操作指南\n+echo \"\n+下一步操作：\n+1. cd web\n+2. npm install\n+3. npm run dev\n+\"\n\\ No newline at end of file\n"
                }
            ],
            "date": 1731849359906,
            "name": "Commit-0",
            "content": "#!/bin/bash\n\n# 创建主目录结构\nmkdir -p web/src\nmkdir -p web/public\n\nmkdir -p server/app/{api,models,services,utils}\nmkdir -p server/logs\nmkdir -p server/scripts\nmkdir -p server/tests\n\n# 创建后端Python包所需的__init__.py文件\ntouch server/app/__init__.py\ntouch server/app/api/__init__.py\ntouch server/app/models/__init__.py\ntouch server/app/services/__init__.py\ntouch server/app/utils/__init__.py\n\n# 创建后端基础文件\ntouch server/app/config.py\ntouch server/main.py\n\n# 移动现有前端文件到web/src目录\n# 注意：这里需要根据实际情况调整源目录路径\nmv src/* web/src/\nmv public/* web/public/\n\n# 创建空的日志目录\ntouch server/logs/.gitkeep\n\n# 设置权限\nchmod +x init.sh "
        }
    ]
}